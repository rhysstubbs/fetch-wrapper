(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function r(e,t,r,n,s,a,i){try{var o=e[a](i),u=o.value}catch(e){return void r(e)}o.done?t(u):Promise.resolve(u).then(n,s)}function n(e){return function(){var t=this,n=arguments;return new Promise((function(s,a){var i=e.apply(t,n);function o(e){r(i,s,a,o,u,"next",e)}function u(e){r(i,s,a,o,u,"throw",e)}o(void 0)}))}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.r(t),e.d(t,{default:()=>a});const a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=Object.assign({},this.optionDefaults,t),this.options.baseURL.length>0&&"/"===this.options.baseURL[this.options.baseURL.length-1]&&(this.options.baseURL=this.options.baseURL.substr(0,this.options.baseURL.length-1))}var t,r,a,i,o,u,c,p,h;return t=e,(r=[{key:"request",value:(h=n(regeneratorRuntime.mark((function e(t,r){var n,s,a,i,o,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object.assign({},this.requestDefaults,r),e.prev=1,!(this.options.middleware.before.length>0)){e.next=11;break}s=0;case 4:if(!(s<this.options.middleware.before.length)){e.next=11;break}return e.next=7,this.options.middleware.before[s](n);case 7:r=e.sent;case 8:s++,e.next=4;break;case 11:return a=null,i=t.startsWith("/")?t:"/"+t,t.startsWith("http")||t.startsWith("https")?a=new URL(t):this.options.baseURL.length>0&&(a=new URL(this.options.baseURL+i)),e.next=16,fetch(a.toString(),n);case 16:if(o=e.sent,!(this.options.middleware.after.length>0)){e.next=26;break}u=0;case 19:if(!(u<this.options.middleware.after.length)){e.next=26;break}return e.next=22,this.options.middleware.after[u](o,n);case 22:o=e.sent;case 23:u++,e.next=19;break;case 26:return e.abrupt("return",o);case 29:return e.prev=29,e.t0=e.catch(1),e.abrupt("return",Promise.reject(e.t0));case 32:case"end":return e.stop()}}),e,this,[[1,29]])}))),function(e,t){return h.apply(this,arguments)})},{key:"get",value:(p=n(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request(t,{method:"GET"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"post",value:(c=n(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request(t,{method:"POST",body:JSON.stringify(r)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"put",value:(u=n(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request(t,{method:"PUT",body:JSON.stringify(r)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)})},{key:"patch",value:(o=n(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request(t,{method:"PATCH",payload:JSON.stringify(r)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"delete",value:(i=n(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request(t,{method:"DELETE"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"use",value:function(e,t){return e?"before"!==t&&"after"!==t?new Error('Valid pipeline values are "before" or "after"'):void this.options.middleware[t].push(e):new Error("Function required")}},{key:"optionDefaults",get:function(){return{baseURL:"",middleware:{before:[],after:[]}}}},{key:"requestDefaults",get:function(){return{method:"GET",cache:"no-cache",headers:{"Content-Type":"application/json",Accept:"application/json"}}}}])&&s(t.prototype,r),a&&s(t,a),e}();module.exports.FetchWrapper=t})();